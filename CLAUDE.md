# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.
本文件为 Claude Code (claude.ai/code) 在处理此仓库代码时提供指导。

## 1. Project Overview (项目概览)

**Quant Nano Alpha** is a distributed quantitative trading system built on Spring Cloud Alibaba microservices architecture.
**Quant Nano Alpha** 是一个基于 Spring Cloud Alibaba 微服务架构的分布式量化交易系统。

- **Core Concepts (核心概念)**:
  - **Quant**: Quantitative trading (量化交易)
  - **Nano**: Small capital scale focus (极小资金规模)
  - **Alpha**: Pursuit of excess returns (追求超额收益)

## 2. Technology Stack (技术栈)

- **Language**: Java 21
- **Frameworks**:
  - Spring Boot 3.5.3
  - Spring Cloud 2025.0.0
  - Spring Cloud Alibaba 2023.0.3.3
- **Middleware (中间件)**:
  - **Nacos**: Service discovery & Configuration (服务注册与配置)
  - **Sentinel**: Circuit breaking & Flow control (熔断与限流)
  - **Seata**: Distributed transactions (分布式事务)
  - **XXL-JOB**: Distributed scheduling (分布式任务调度)
  - **Gateway**: Spring Cloud Gateway
  - **Kafka**: Message Queue (implied by `integration/kafka`)
- **Build Tool**: Maven

## 3. Project Structure (项目结构)

```text
quant-nano-alpha/
├── common/                     # Shared Library (公共模块)
│   ├── constants/              # System constants (Common, Redis, etc.)
│   ├── dto/                    # Data Transfer Objects
│   ├── enums/                  # System Enums (Strategy, Market, etc.)
│   ├── exception/              # Global Exceptions (BusinessException)
│   ├── integration/            # Middleware integration (Kafka, etc.)
│   ├── util/                   # Utilities (Date, JSON, Encryption)
│   └── docs/                   # Internal documentation (Architecture, Guides)
├── services/                   # Business Services (业务服务)
│   ├── quant-data-collector/   # Market Data Collection (行情采集)
│   ├── quant-strategy-engine/  # Strategy Execution Engine (策略引擎)
│   ├── quant-risk-control/     # Risk Management (风控服务)
│   ├── quant-stock-list/       # Stock Metadata (股票基础数据)
│   ├── quant-data-archive/     # Data Archiving (数据归档)
│   └── quant-xxl-job/          # Job Scheduling (定时任务)
```

## 4. Build & Run Commands (构建与运行命令)

### Build (构建)
```bash
# Build entire project (构建整个项目)
mvn clean install

# Build specific module with dependencies (构建特定模块及其依赖)
mvn clean install -pl services/quant-data-collector -am

# Skip tests (跳过测试)
mvn clean install -DskipTests
```

### Run Services (运行服务)
```bash
# Run a specific service via Spring Boot plugin (运行特定服务)
mvn spring-boot:run -pl services/quant-data-collector

# Run with specific profile (指定环境运行)
mvn spring-boot:run -pl services/quant-data-collector -Dspring-boot.run.profiles=dev
```

### Test (测试)
```bash
# Run all tests (运行所有测试)
mvn test

# Run tests for a module (运行模块测试)
mvn test -pl services/quant-strategy-engine

# Run single test class (运行单个测试类)
mvn test -Dtest=ClassName

# Run single test method (运行单个测试方法)
mvn test -Dtest=ClassName#methodName
```

## 5. Development Guidelines (开发指南)

### Code Style (代码风格)
- **Lombok**: Extensively used (`@Data`, `@Slf4j`, `@Builder`).
- **Naming**: CamelCase for Java classes/methods. Constants in UPPER_SNAKE_CASE.
- **DTOs**: Use DTOs for data transfer between layers.

### Key Components (关键组件)
- **Constants**: Check `common/src/main/java/constants/` before magic numbers/strings.
  - `CommonConstants`: Success codes, DB flags.
  - `RedisKeyConstants`: Redis key prefixes.
- **Utilities**: Prefer using `common/src/main/java/util/`.
  - `DateUtil`: Date manipulation.
  - `JsonUtil`: JSON serialization.
  - `AesEncryptUtil`: Encryption.

### Documentation (文档)
- Refer to `common/src/main/java/docs/` for specific architectural details.
  - `MarketReplayServiceArchitecture.md`: Replay service architecture.
  - `KafkaLogAccessGuide.md`: Kafka usage.

### Error Handling (错误处理)
- Use `BusinessException` for logic errors.
- Return standardized response codes (Success: 200).

## 6. Architecture Highlights (架构重点)

- **Microservices**: Services communicate likely via Feign (OpenFeign dependency) or Kafka.
- **Config Management**: Centralized configuration in Nacos.
- **Data Access**: MyBatis/MyBatis-Plus (implied by `dal` and `mapper` directories).

---
*Generated by Claude Code for automated assistance.*
